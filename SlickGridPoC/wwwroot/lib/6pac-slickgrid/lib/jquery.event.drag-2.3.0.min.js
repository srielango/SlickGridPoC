!function(g){g.fn.drag=function(t,e,a){var n="string"==typeof t?t:"",r=g.isFunction(t)?t:g.isFunction(e)?e:null;return 0!==n.indexOf("drag")&&(n="drag"+n),a=(t==r?e:a)||{},r?this.on(n,a,r):this.trigger(n)};var h=g.event,n=h.special,f=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var a=g.data(this,f.datakey),n=t.data||{};a.related+=1,g.each(f.defaults,function(t,e){void 0!==n[t]&&(a[t]=n[t])})},remove:function(){var t=g.data(this,f.datakey);t&&--t.related},setup:function(){var t;g.data(this,f.datakey)||(t=g.extend({related:0},f.defaults),g.data(this,f.datakey,t),h.add(this,"touchstart mousedown",f.init,t),this.attachEvent&&this.attachEvent("ondragstart",f.dontstart))},teardown:function(){(g.data(this,f.datakey)||{}).related||(g.removeData(this,f.datakey),h.remove(this,"touchstart mousedown",f.init),f.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",f.dontstart))},init:function(t){if(!f.touched){var e=t.data;if(!(0!=t.which&&0<e.which&&t.which!=e.which)){var a=g(t.target).attr("class")||"";if(!g(t.target).is(e.not)&&a&&-1!==a.toString().indexOf("slick")&&(!e.handle||g(t.target).closest(e.handle,t.currentTarget).length)&&(f.touched="touchstart"==t.type?this:null,e.propagates=1,e.mousedown=this,e.interactions=[f.interaction(this,e)],e.target=t.target,e.pageX=t.pageX,e.pageY=t.pageY,e.dragging=null,a=f.hijack(t,"draginit",e),e.propagates))return(a=f.flatten(a))&&a.length&&(e.interactions=[],g.each(a,function(){e.interactions.push(f.interaction(this,e))})),e.propagates=e.interactions.length,!1!==e.drop&&n.drop&&n.drop.handler(t,e),f.textselect(!1),f.touched?h.add(f.touched,"touchmove touchend",f.handler,e):h.add(document,"mousemove mouseup",f.handler,e),!(!f.touched||e.live)&&void 0}}},interaction:function(t,e){e=t&&t.ownerDocument&&g(t)[e.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new f.callback,droppable:[],offset:e}},handler:function(t){var e=t.data;switch(t.type){case!e.dragging&&"touchmove":t.preventDefault();case!e.dragging&&"mousemove":if(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2)<Math.pow(e.distance,2))break;t.target=e.target,f.hijack(t,"dragstart",e),e.propagates&&(e.dragging=!0);case"touchmove":t.preventDefault();case"mousemove":if(e.dragging){if(f.hijack(t,"drag",e),e.propagates){!1!==e.drop&&n.drop&&n.drop.handler(t,e);break}t.type="mouseup"}default:f.touched?h.remove(f.touched,"touchmove touchend",f.handler):h.remove(document,"mousemove mouseup",f.handler),e.dragging&&(!1!==e.drop&&n.drop&&n.drop.handler(t,e),f.hijack(t,"dragend",e)),f.textselect(!0),!1===e.click&&e.dragging&&g.data(e.mousedown,"suppress.click",(new Date).getTime()+5),e.dragging=f.touched=!1}},hijack:function(a,n,r,t,e){if(r){function o(){}var i,d,s,c={event:a.originalEvent,type:a.type},l=n.indexOf("drop")?"drag":"drop",p=t||0,u=isNaN(t)?r.interactions.length:t;a.type=n;a.originalEvent=new jQuery.Event(c.event,{preventDefault:o,stopPropagation:o,stopImmediatePropagation:o}),r.results=[];do{if(d=r.interactions[p]){if("dragend"!==n&&d.cancelled)continue;s=f.properties(a,r,d),d.results=[],g(e||d[l]||r.droppable).each(function(t,e){if(s.target=e,!(a.isPropagationStopped=function(){return!1})===(i=e?h.dispatch.call(e,a,s):null)?("drag"==l&&(d.cancelled=!0,--r.propagates),"drop"==n&&(d[l][t]=null)):"dropinit"==n&&d.droppable.push(f.element(i)||e),"dragstart"==n&&(d.proxy=g(f.element(i)||d.drag)[0]),d.results.push(i),delete a.result,"dropinit"!==n)return i}),r.results[p]=f.flatten(d.results),"dropinit"==n&&(d.droppable=f.flatten(d.droppable)),"dragstart"!=n||d.cancelled||s.update()}}while(++p<u);return a.type=c.type,a.originalEvent=c.event,f.flatten(r.results)}},properties:function(t,e,a){var n=a.callback;return n.drag=a.drag,n.proxy=a.proxy||a.drag,n.startX=e.pageX,n.startY=e.pageY,n.deltaX=t.pageX-e.pageX,n.deltaY=t.pageY-e.pageY,n.originalX=a.offset.left,n.originalY=a.offset.top,n.offsetX=n.originalX+n.deltaX,n.offsetY=n.originalY+n.deltaY,n.drop=f.flatten((a.drop||[]).slice()),n.available=f.flatten((a.droppable||[]).slice()),n},element:function(t){if(t&&(t.jquery||1==t.nodeType))return t},flatten:function(t){return g.map(t,function(t){return t&&t.jquery?g.makeArray(t):t&&t.length?f.flatten(t):t})},textselect:function(t){g(document)[t?"off":"on"]("selectstart",f.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}},e=(f.callback.prototype={update:function(){n.drop&&this.available.length&&g.each(this.available,function(t){n.drop.locate(this,t)})}},h.dispatch);h.dispatch=function(t){if(!(0<g.data(this,"suppress."+t.type)-(new Date).getTime()))return e.apply(this,arguments);g.removeData(this,"suppress."+t.type)},n.draginit=n.dragstart=n.dragend=f}(jQuery);