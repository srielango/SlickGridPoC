!function(e){Slick.Utils.extend(!0,e,{Slick:{DraggableGrouping:function(p){var r,u,g,n,s,a,y,h,v,f,i={},l=new Slick.Event,m=new Slick.BindingEventService,c=new Slick.EventHandler;var k=[];function d(e,o){const l=o.getAttribute("data-id");var t=l&&l.replace(u,"");let r=!0;for(const s of k)s.id===t&&(r=!1);if(r){for(const a of g)if(a.id===t&&a.grouping&&!Slick.Utils.isEmptyObject(a.grouping)){var n=o.querySelector(".slick-column-name");const i=document.createElement("div"),c=(i.id=`${u}_${a.id}_entry`,i.className="slick-dropped-grouping",i.dataset.id=""+a.id,document.createElement("div")),d=(c.className="slick-dropped-grouping-title",c.style.display="inline-flex",c.textContent=(n||o).textContent,i.appendChild(c),document.createElement("div"));d.className="slick-groupby-remove",p.deleteIconCssClass&&d.classList.add(p.deleteIconCssClass.split(" ")),p.deleteIconImage&&d.classList.add(p.deleteIconImage.split(" ")),p.deleteIconCssClass||d.classList.add("slick-groupby-remove-icon"),p.deleteIconImage||d.classList.add("slick-groupby-remove-image"),p&&!0!==p.hideGroupSortIcons&&a.sortable&&a.grouping&&void 0===a.grouping.sortAsc&&(a.grouping.sortAsc=!0),i.appendChild(d),i.appendChild(document.createElement("div")),e.appendChild(i),n=a,k.push(n),b("add-group"),!function(t,r,n){m.bind(r,"click",()=>{for(const l of m.boundedEvents.filter(e=>e.element===r))m.unbind(l.element,"click",l.listener);var e=t,o=(n.remove(),[]);g.forEach(function(e){o[e.id]=e}),function(e){var o,l,t=arguments,r=t.length;for(;1<r&&e.length;)for(o=t[--r];-1!=(l=e.indexOf(o));)e.splice(l,1)}(k,o[e]),0===k.length&&(y.style="block",h.style.display="none"),b("remove-group")})}(a.id,d,i)}h.style.display="inline-block"}}function b(e){if(0===k.length)return n.setGrouping([]),void l.notify({caller:e,groupColumns:[]});var o=[];k.forEach(function(e){o.push(e.grouping)}),n.setGrouping(o),l.notify({caller:e,groupColumns:o})}Slick.Utils.extend(this,{init:function(e){p=Slick.Utils.extend(!0,{},i,p),u=(r=e).getUID(),g=r.getColumns(),n=r.getData(),(s=e.getPreHeaderPanel()).classList.add("slick-dropzone"),e=p.dropPlaceHolderText||"Drop a column header here to group by the column",(y=document.createElement("div")).className="slick-placeholder",y.textContent=e,(h=document.createElement("div")).className="slick-group-toggle-all expanded",h.style.display="none",s.appendChild(y),s.appendChild(h);{const t=s;a=Sortable.create(t,{group:"shared",ghostClass:"slick-droppable-sortitem-hover",draggable:".slick-dropped-grouping",dragoverBubble:!0,onAdd:e=>{const o=e.item,l=o.getAttribute("id");l&&l.replace(u,"")&&d(t,Sortable.utils.clone(e.item)),e.clone.style.opacity=".5",o.parentNode&&o.parentNode.removeChild(o)},onUpdate:()=>{var e=a&&a.toArray()||[];let o=[];for(var l=0,t=e.length;l<t;l++)for(var r=0,n=k.length;r<n;r++)if(k[r].id==e[l]){o.push(k[r]);break}k=o,b("sort-group")}});e=s.querySelector(".slick-placeholder");e&&(m.bind(e,"dragover",e=>e.preventDefault),m.bind(e,"dragenter",()=>s.classList.add("slick-dropzone-hover")),m.bind(e,"dragleave",()=>s.classList.remove("slick-dropzone-hover"))),h&&m.bind(h,"click",e=>{const o=e.target;var l,t;[e,l=!0,t=!0]=[o,o&&o.classList.contains("expanded")],e&&(!0===l?(e.classList.add("collapsed"),e.classList.remove("expanded"),t&&n.collapseAllGroups()):(e.classList.remove("collapsed"),e.classList.add("expanded"),t&&n.expandAllGroups()))})}c.subscribe(r.onHeaderCellRendered,function(e,o){var l=o.column,o=o.node;if(!Slick.Utils.isEmptyObject(l.grouping)&&o&&(o.style.cursor="pointer",p.groupIconCssClass||p.groupIconImage)){const t=document.createElement("span");t.className="slick-column-groupable",p.groupIconCssClass&&t.classList.add(p.groupIconCssClass.split(" ")),p.groupIconImage&&(t.style.background="url("+p.groupIconImage+") no-repeat center center"),o.appendChild(t)}});for(var o=0;o<g.length;o++){var l=g[o].field;r.updateColumnHeader(l)}},destroy:function(){v&&v.el&&v.destroy(),f&&f.el&&f.destroy(),l.unsubscribe(),c.unsubscribeAll(),m.unbindAll(),Slick.Utils.emptyElement(document.querySelector(`.${u} .slick-preheader-panel`))},pluginName:"DraggableGrouping",onGroupChanged:l,setDroppedGroups:function(e){e=Array.isArray(e)?e:[e],y.style.display="none";for(const l of e){var o=r.getHeaderColumn(l);d(s,o)}},clearDroppedGroups:function(){k=[],b("clear-all");var e=s.querySelectorAll(".slick-dropped-grouping");h.style.display="none";for(const o of Array.from(e)){const l=s.querySelector(".slick-groupby-remove");l&&l.remove(),o&&o.remove()}y.style.display="inline-block"},getSetupColumnReorder:function(i,c,e,d,p,o,u,l,g){const m=i.getPreHeaderPanel();var t={animation:50,ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dataIdAttr:"data-id",group:{name:"shared",pull:"clone",put:!1},revertClone:!0,onStart:function(){m.classList.add("slick-dropzone-hover"),m.classList.add("slick-dropzone-placeholder-hover");const e=m.querySelector(".slick-placeholder"),o=(e.style.display="inline-block",h.style.display="none",m.querySelectorAll(".slick-dropped-grouping"));o.forEach(e=>e.style.display="none")},onEnd:function(e){const o=m.querySelector(".slick-placeholder"),l=(m.classList.remove("slick-dropzone-hover"),o.classList.remove("slick-dropzone-placeholder-hover"),y&&(y.style.display="none"),o&&o.parentElement&&o.parentElement.classList.remove("slick-dropzone-placeholder-hover"),m.querySelectorAll(".slick-dropped-grouping"));if(l.forEach(e=>e.style.display="inline-block"),l.length&&(o&&(o.style.display="none"),h.style.display="inline-block"),i.getEditorLock().commitCurrentEdit()){const r=v&&v.toArray()||[];if(1<c.length)for(const s of f&&f.toArray()||[])r.push(s);const n=[];var t=i.getColumns();for(const a of r)n.push(t[u(a)]);d(n),g(i.onColumnsReordered,{grid:i}),e.stopPropagation(),p()}}};return v=Sortable.create(document.querySelector(`.${i.getUID()} .slick-header-columns.slick-header-columns-left`),t),f=Sortable.create(document.querySelector(`.${i.getUID()} .slick-header-columns.slick-header-columns-right`),t),{sortableLeftInstance:v,sortableRightInstance:f}}})}}})}(window);